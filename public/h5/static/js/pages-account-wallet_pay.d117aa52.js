(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-account-wallet_pay"],{"0018":function(t,n,i){t.exports=i.p+"static/images/icon_weixinpay.png"},"0831":function(t,n,i){"use strict";var e=i("f5bd").default;i("bf0f");var a=e(i("a55b")),o=a.default.api_url;function s(t,n,i,e){var s={"content-type":"application/x-www-form-urlencoded"},u=void 0!=e.responseType?e.responseType:"txt";t=o+t,i=i||{};i["user_token"]=uni.getStorageSync("user_token"),i["request_client"]=a.default.app_client;var c=new Promise((function(e,a){uni.request({url:t,method:n,data:i,header:s,responseType:u,success:function(t){return 401==t.data.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.data.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void e(t.data)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return c}["options","get","post","put","head","delete","trace","connect"].forEach((function(t){s[t]=function(n,i,e){return s(n,t,i,e||{})}})),t.exports={request:s,upload:function(t,n){var i=o+"/upload";n=n||{},n["user_token"]=uni.getStorageSync("user_token");var e=new Promise((function(e,a){uni.uploadFile({url:i,filePath:t,name:"file",formData:n,success:function(t){t=JSON.parse(t.data);return 401==t.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void e(t)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return e}}},"117c":function(t,n,i){i("f7a5"),i("5ef2"),i("d4b5"),i("5c47"),i("2c10"),t.exports={isEmptyObject:function(t){return"{}"==JSON.stringify(t)},timeToDate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t?new Date(t):new Date,e=i.getFullYear(),a=i.getMonth()+1,o=i.getDate(),s=i.getHours(),u=i.getMinutes(),c=i.getSeconds();a<10&&(a="0"+a),o<10&&(o="0"+o),s<10&&(s="0"+s),u<10&&(u="0"+u),c<10&&(c="0"+c);var r="";return 1==n&&(r=e+"-"+a+"-"+o),2==n&&(r=e+"-"+a+"-"+o+" "+s+":"+u+":"+c),r},urlToObj:function(t){for(var n={},i=t.slice(t.indexOf("?")+1),e=i.split("&"),a=e.length,o=0;o<a;o++){var s=e[o].split("=");n[s[0]]=s[1]}return n},is_wx:function(){return!1},is_pc:function(){for(var t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,e=0;e<n.length;e++)if(t.indexOf(n[e])>0){i=!1;break}return i}}},"14e1":function(t,n,i){"use strict";i.r(n);var e=i("4132"),a=i("6789");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return a[t]}))}(o);var s=i("828b"),u=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"1df43acd",null,!1,e["a"],void 0);n["default"]=u.exports},"36a5":function(t,n,i){t.exports=i.p+"static/images/icon_alipay.png"},4132:function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return a})),i.d(n,"a",(function(){}));var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",[i("v-uni-view",{staticClass:"customtop"},[i("v-uni-view",{staticClass:"item left"},[i("i",{staticClass:"back iconfont icon-xiangzuo2",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goBack.apply(void 0,arguments)}}}),i("i",{staticClass:"home iconfont icon-shouye",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goHome.apply(void 0,arguments)}}})]),i("v-uni-view",{staticClass:"item title"},[t._v(t._s(t.top_title))]),i("v-uni-view",{staticClass:"item right",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage(t.right_url)}}},[t._v(t._s(t.right_txt))])],1),i("v-uni-view",{staticClass:"customtop_blank"})],1)},a=[]},4247:function(t,n,i){"use strict";i.r(n);var e=i("a89a"),a=i("4457");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return a[t]}))}(o);i("bd066");var s=i("828b"),u=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"33bc6e4c",null,!1,e["a"],void 0);n["default"]=u.exports},4457:function(t,n,i){"use strict";i.r(n);var e=i("cf02"),a=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(o);n["default"]=a.a},4702:function(t,n,i){var e=i("c86c");n=e(!1),n.push([t.i,".aduty-form-box[data-v-33bc6e4c]{margin-top:%?30?%}.payment[data-v-33bc6e4c]{background-color:#fff;padding:%?30?% %?30?% 0 %?30?%;border-radius:3px;margin-top:%?30?%}.payment .stitle[data-v-33bc6e4c]{padding:0 0 %?30?% 0;border-bottom:1px solid #f5f5f5}.payment_foot[data-v-33bc6e4c]{margin-top:%?50?%}",""]),t.exports=n},4806:function(t,n,i){var e=i("4702");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=i("967d").default;a("57a1f195",e,!0,{sourceMap:!1,shadowMode:!1})},6789:function(t,n,i){"use strict";i.r(n);var e=i("baac"),a=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(o);n["default"]=a.a},a55b:function(t,n){t.exports={app_client:"h5",api_url:"/api",app_version:"1.0.1",app_env:"dev"}},a89a:function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return a})),i.d(n,"a",(function(){}));var e=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("CustomTop",{attrs:{top_title:"钱包充值"}}),e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"aduty-form"},[e("v-uni-view",{staticClass:"aduty-form-box"},[e("v-uni-view",{staticClass:"stitle"},[e("span",{staticClass:"txt"},[t._v("充值金额")])]),e("v-uni-view",{staticClass:"aduty-form-cell"},[e("v-uni-view",{staticClass:"aduty-form-cell-box"},[e("v-uni-view",{staticClass:"aduty-form-cell-bd"},[e("v-uni-input",{staticClass:"aduty-form-input",attrs:{name:"price",type:"text",placeholder:"请输入充值金额"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.changeInput_price.apply(void 0,arguments)}}})],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"payment"},[e("v-uni-view",{staticClass:"stitle"},[t._v("支付方式")]),e("v-uni-view",{staticClass:"items"},[e("v-uni-view",{staticClass:"item",class:"weixinpay"==t.payment_way?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setPaymentWay("weixinpay")}}},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{staticClass:"icon",attrs:{src:i("0018")}}),e("span",{staticClass:"txt"},[t._v("微信支付")])],1),e("i",{staticClass:"iconfont icon-yuanxingweixuanzhong"})],1),e("v-uni-view",{staticClass:"item",class:"alipay_wap"==t.payment_way?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setPaymentWay("alipay_wap")}}},[e("v-uni-view",{staticClass:"left"},[e("v-uni-image",{staticClass:"icon",attrs:{src:i("36a5")}}),e("span",{staticClass:"txt"},[t._v("支付宝支付")])],1),e("i",{staticClass:"iconfont icon-yuanxingweixuanzhong"})],1)],1)],1),"ios"!=t.systemInfo.platform||1==t.config.wxapp.ios_pay_status?e("v-uni-view",{staticClass:"payment_foot"},[e("v-uni-button",{staticClass:"aduty-btn aduty-btn-payment",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.payFun.apply(void 0,arguments)}}},[t._v("立即支付")])],1):t._e(),"ios"==t.systemInfo.platform&&0==t.config.wxapp.ios_pay_status?e("v-uni-view",{style:{marginTop:"20px",marginBottom:"20px",textAlign:"center"}},[t._v(" 功能暂时不能使用 ")]):t._e()],1)],1)},a=[]},baac:function(t,n,i){"use strict";i("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={name:"CustomTop",data:function(){return{}},props:{top_title:{type:String},right_txt:{type:String},right_url:{type:String}},methods:{goBack:function(){uni.navigateBack()},goHome:function(){uni.switchTab({url:"/pages/index/index"})},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=e},bd066:function(t,n,i){"use strict";var e=i("4806"),a=i.n(e);a.a},cf02:function(t,n,i){"use strict";i("6a54");var e=i("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i("0831"),o=e(i("117c")),s=e(i("14e1")),u=e(i("a55b")),c={components:{CustomTop:s.default},data:function(){return{price:{},payment_way:"weixinpay",config:{},systemInfo:{}}},onLoad:function(){var t=this,n=this;uni.getSystemInfo({success:function(t){n.systemInfo=t}}),n.systemInfo.platform="h5",a.request.post("/common/getConfig").then((function(n){t.config=n.data}))},methods:{payFun:function(){if("dev"==u.default.app_env)return uni.showModal({content:"演示版不支持支付，正式版恢复此功能，可咨询正式版本。",showCancel:!1}),!1;var t=this;uni.showModal({title:"提示",content:"确认支付？",success:function(n){if(n.confirm){uni.showLoading();var i={price:t.price},e=t.payment_way;"weixinpay"==e&&(e=o.default.is_wx()?"weixinpay_jsapi_wxmp":"weixinpay_h5"),i.payment_way=e,a.request.post("/payment/pay_wallet",i).then((function(n){if(uni.hideLoading(),400==n.code)return uni.showToast({title:n.message,icon:"none"}),!1;"alipay_wap"==e&&(document.querySelector("body").innerHTML=n.data,document.forms[0].submit()),"weixinpay_h5"==e&&(window.location.href=n.data.url),"weixinpay_jsapi_wxmp"==e&&t.onBridgeReady(n.data.jsApiParams),"weixinpay_jsapi_wxapp"==e&&t.onBridgeReady(n.data.jsApiParams),"wallet"==e&&uni.showToast({title:"支付成功",icon:"success",duration:1500,success:function(){setTimeout((function(){uni.navigateBack({delta:1})}),1500)}})}))}}})},onBridgeReady:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg&&uni.showToast({title:"支付成功",icon:"success",duration:1500,success:function(){setTimeout((function(){uni.navigateBack({delta:1})}),1500)}})}))},setPaymentWay:function(t){this.payment_way=t},changeInput_price:function(t){this.price=t.target.value},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=c}}]);