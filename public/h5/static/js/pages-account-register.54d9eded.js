(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-account-register"],{"0831":function(t,e,n){"use strict";var i=n("f5bd").default;n("bf0f");var o=i(n("a55b")),a=o.default.api_url;function s(t,e,n,i){var s={"content-type":"application/x-www-form-urlencoded"},u=void 0!=i.responseType?i.responseType:"txt";t=a+t,n=n||{};n["user_token"]=uni.getStorageSync("user_token"),n["request_client"]=o.default.app_client;var c=new Promise((function(i,o){uni.request({url:t,method:e,data:n,header:s,responseType:u,success:function(t){return 401==t.data.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.data.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t.data)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return c}["options","get","post","put","head","delete","trace","connect"].forEach((function(t){s[t]=function(e,n,i){return s(e,t,n,i||{})}})),t.exports={request:s,upload:function(t,e){var n=a+"/upload";e=e||{},e["user_token"]=uni.getStorageSync("user_token");var i=new Promise((function(i,o){uni.uploadFile({url:n,filePath:t,name:"file",formData:e,success:function(t){t=JSON.parse(t.data);return 401==t.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return i}}},"117c":function(t,e,n){n("f7a5"),n("5ef2"),n("d4b5"),n("5c47"),n("2c10"),t.exports={isEmptyObject:function(t){return"{}"==JSON.stringify(t)},timeToDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t?new Date(t):new Date,i=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),s=n.getHours(),u=n.getMinutes(),c=n.getSeconds();o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<10&&(u="0"+u),c<10&&(c="0"+c);var r="";return 1==e&&(r=i+"-"+o+"-"+a),2==e&&(r=i+"-"+o+"-"+a+" "+s+":"+u+":"+c),r},urlToObj:function(t){for(var e={},n=t.slice(t.indexOf("?")+1),i=n.split("&"),o=i.length,a=0;a<o;a++){var s=i[a].split("=");e[s[0]]=s[1]}return e},is_wx:function(){return!1},is_pc:function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,i=0;i<e.length;i++)if(t.indexOf(e[i])>0){n=!1;break}return n}}},"14e1":function(t,e,n){"use strict";n.r(e);var i=n("4132"),o=n("6789");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var s=n("828b"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1df43acd",null,!1,i["a"],void 0);e["default"]=u.exports},"325e":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("CustomTop",{attrs:{top_title:"注册"}}),n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"login"},[n("v-uni-form",{ref:"form",staticClass:"aduty-fm",on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"aduty-fm-item"},[n("v-uni-view",{staticClass:"aduty-fm-inputbox"},[n("v-uni-input",{staticClass:"aduty-fm-input",attrs:{name:"nickname",type:"text",placeholder:"昵称"}})],1)],1),n("v-uni-view",{staticClass:"aduty-fm-item"},[n("v-uni-view",{staticClass:"aduty-fm-inputbox"},[n("v-uni-input",{staticClass:"aduty-fm-input",attrs:{name:"phone",type:"text",placeholder:"手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),n("v-uni-view",{staticClass:"aduty-fm-item"},[n("v-uni-view",{staticClass:"aduty-fm-inputbox"},[n("v-uni-input",{staticClass:"aduty-fm-input",attrs:{name:"code",type:"text",placeholder:"验证码"}}),n("span",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendCode.apply(void 0,arguments)}}},[t._v(t._s(t.luckSend_btnTxt))])],1)],1),n("v-uni-view",{staticClass:"aduty-fm-item"},[n("v-uni-view",{staticClass:"aduty-fm-inputbox"},[n("v-uni-input",{staticClass:"aduty-fm-input",attrs:{name:"password",type:"password",placeholder:"密码"}})],1)],1),n("v-uni-view",{staticClass:"aduty-fm-item"},[n("v-uni-view",{staticClass:"aduty-fm-inputbox"},[n("v-uni-input",{staticClass:"aduty-fm-input",attrs:{name:"password_confirm",type:"password",placeholder:"重复密码"}})],1)],1),n("v-uni-view",{staticClass:"remind"},[n("v-uni-radio",{attrs:{color:"#f4645f",checked:t.read_agreement_status},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setReadAgreement.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"txt"},[t._v("阅读并同意"),n("span",{staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage("/pages/article/show?type=user_agreement")}}},[t._v("《用户协议》")])])],1),n("v-uni-button",{staticClass:"aduty-btn aduty-btn-default",style:{marginTop:"15px"},attrs:{formType:"submit"}},[t._v("立即登录")])],1),n("v-uni-view",{staticClass:"other_way"},[n("v-uni-view",{staticClass:"ow_item ow_item1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage("/pages/account/login_password")}}},[t._v("已有账号？立即登录")])],1),t.read_agreement_status?t._e():n("v-uni-view",{staticClass:"wxapplogin none",style:{marginTop:"50px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showAgreementErrorMsg.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"box"},[n("v-uni-image",{staticClass:"img",attrs:{src:"/static/images/phone.png"}}),n("v-uni-view",{staticClass:"txt"},[t._v("手机号快捷登录")]),n("v-uni-button",{staticClass:"btn"},[t._v("获取手机号码")])],1)],1),t.read_agreement_status?n("v-uni-view",{staticClass:"wxapplogin none",style:{marginTop:"50px"}},[n("v-uni-view",{staticClass:"box"},[n("v-uni-image",{staticClass:"img",attrs:{src:"/static/images/phone.png"}}),n("v-uni-view",{staticClass:"txt"},[t._v("手机号快捷登录")]),n("v-uni-button",{staticClass:"btn",attrs:{"open-type":"getPhoneNumber"},on:{getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.decryptPhoneNumber.apply(void 0,arguments)}}},[t._v("获取手机号码")])],1)],1):t._e()],1)],1)],1)},o=[]},4132:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"customtop"},[n("v-uni-view",{staticClass:"item left"},[n("i",{staticClass:"back iconfont icon-xiangzuo2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}}),n("i",{staticClass:"home iconfont icon-shouye",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goHome.apply(void 0,arguments)}}})]),n("v-uni-view",{staticClass:"item title"},[t._v(t._s(t.top_title))]),n("v-uni-view",{staticClass:"item right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage(t.right_url)}}},[t._v(t._s(t.right_txt))])],1),n("v-uni-view",{staticClass:"customtop_blank"})],1)},o=[]},"497c":function(t,e,n){"use strict";n.r(e);var i=n("bded"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},6789:function(t,e,n){"use strict";n.r(e);var i=n("baac"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"690e":function(t,e,n){var i=n("b66c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("967d").default;o("42a84119",i,!0,{sourceMap:!1,shadowMode:!1})},a55b:function(t,e){t.exports={app_client:"h5",api_url:"/api",app_version:"1.0.1",app_env:"dev"}},b66c:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".login[data-v-35777ef9]{padding:%?40?% 0 %?30?% 0}.login .item[data-v-35777ef9]{margin-bottom:%?30?%}.login .other_way[data-v-35777ef9]{display:block;overflow:hidden;width:100%;margin-top:%?30?%}.login .other_way .ow_item[data-v-35777ef9]{display:inline-block;font-size:%?24?%;color:#999}.login .other_way .ow_item1[data-v-35777ef9]{float:left}.login .other_way .ow_item2[data-v-35777ef9]{float:right}.wxapplogin .box[data-v-35777ef9]{text-align:center;position:relative}.wxapplogin .img[data-v-35777ef9]{width:35px;height:35px}.wxapplogin .txt[data-v-35777ef9]{font-size:12px;color:#999}.wxapplogin .box .btn[data-v-35777ef9]{position:absolute;width:100%;height:100%;top:0;opacity:0}.remind[data-v-35777ef9]{margin:0 auto;display:flex;font-size:12px}.remind .txt[data-v-35777ef9]{margin-left:3px;padding-top:3px;color:#999}.remind .link[data-v-35777ef9]{color:#f4645f}uni-page-body[data-v-35777ef9]{background-color:#fff}body.?%PAGE?%[data-v-35777ef9]{background-color:#fff}.ubtn[data-v-35777ef9]{padding:5px!important}",""]),t.exports=e},baac:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"CustomTop",data:function(){return{}},props:{top_title:{type:String},right_txt:{type:String},right_url:{type:String}},methods:{goBack:function(){uni.navigateBack()},goHome:function(){uni.switchTab({url:"/pages/index/index"})},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};e.default=i},bded:function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("0831"),a=i(n("14e1")),s=i(n("117c")),u={components:{CustomTop:a.default},data:function(){return{form:{phone:""},read_agreement_status:!1,luckSend_btnTxt:"获取验证码",luckSend_seconds:60,luckSend_disabled:!1,code2seesion:""}},onLoad:function(t){if(void 0!=t.invite_code)uni.setStorageSync("invite_code",t.invite_code);else if(void 0!=t.scene){var e=decodeURIComponent(t.scene),n=s.default.urlToObj(e);void 0!=n.invite_code&&uni.setStorageSync("invite_code",n.invite_code)}s.default.is_wx()&&void 0!=t.wxmp_openid&&(this.wxmp_openid=t.wxmp_openid)},onShow:function(){if(s.default.is_wx()){if(void 0!=this.wxmp_openid)return uni.setStorageSync("wxmp_openid",this.wxmp_openid),!1;var t=uni.getStorageSync("wxmp_openid");if(""!=t)return!1;var e=getCurrentPages(),n=(e[e.length-1].route,e[e.length-1]["$page"]["fullPath"]);o.request.post("/common/getConfig").then((function(t){window.location.href=t.data.app_url+"/api/account/wxmp_login?url_ident="+n}))}},methods:{formSubmit:function(t){if(!this.read_agreement_status)return uni.showToast({icon:"none",title:"请先阅读并同意协议"}),!1;uni.showLoading();var e=t.detail.value;e.code2seesion=this.code2seesion,s.default.is_wx()&&(e.type="wxmp",e.wxmp_openid=uni.getStorageSync("wxmp_openid")),e.invite_code=uni.getStorageSync("invite_code"),o.request.post("/account/register",e).then((function(t){uni.hideLoading(),200==t.code?(uni.setStorageSync("user_token",t.data.user_token),uni.showToast({title:"注册成功",duration:1500,success:function(){setTimeout((function(){uni.switchTab({url:"/pages/account/index"})}),1500)}})):400==t.code&&uni.showToast({title:t.message,icon:"none"})}))},sendCode:function(){var t=this;return this.read_agreement_status?!this.luckSend_disabled&&(uni.showLoading({}),void o.request.post("/account/sendCode",{phone:this.form.phone}).then((function(e){if(uni.hideLoading(),200==e.code){t.luckSend_disabled=!0;var n=setInterval((function(){t.luckSend_btnTxt=t.luckSend_seconds+"秒再重试",t.luckSend_seconds--,0===t.luckSend_seconds&&(clearInterval(n),t.luckSend_btnTxt="发送验证码",t.luckSend_seconds=60,t.luckSend_disabled=!1)}),1e3);uni.hideLoading(),uni.showToast({icon:"none",title:"验证码已发送"})}else 400==e.code&&uni.showToast({title:e.message,icon:"none"})}))):(uni.showToast({icon:"none",title:"请先阅读并同意协议"}),!1)},setReadAgreement:function(t){var e=!this.read_agreement_status;this.read_agreement_status=e},wxapp_login1:function(){var t=this;uni.login({success:function(e){e.code?(uni.showLoading(),o.request.post("/account/wxapp_login1",{code:e.code}).then((function(e){if(uni.hideLoading(),400==e.code)return uni.showToast({title:e.message,icon:"none"}),!1;t.code2seesion=e.data.code2seesion}))):(console.log(e),uni.showToast({title:"登录失败",icon:"none"}))}})},showAgreementErrorMsg:function(){return uni.showToast({icon:"none",title:"请先阅读并同意协议"}),!1},decryptPhoneNumber:function(t){if("getPhoneNumber:fail user deny"==t.detail.errMsg)return uni.showToast({title:"取消授权",icon:"none"}),!1;var e=uni.getStorageSync("inviteUserId"),n={};n.inviteUserId=e,n.iv=t.detail.iv,n.encryptedData=t.detail.encryptedData,n.code2seesion=this.code2seesion,uni.showLoading({title:"登录中"}),o.request.post("/account/wxapp_login2",n).then((function(t){if(uni.hideLoading(),400==t.code)return uni.showToast({title:t.message,icon:"none"}),!1;uni.setStorageSync("user_token",t.data.user_token),uni.switchTab({url:"/pages/account/index"});var e=getCurrentPages(),n=e[e.length-2];void 0!=n.loginSuccess&&n.loginSuccess()}))},jumpPage:function(t){uni.navigateTo({url:t})}}};e.default=u},bf48:function(t,e,n){"use strict";var i=n("690e"),o=n.n(i);o.a},dd08:function(t,e,n){"use strict";n.r(e);var i=n("325e"),o=n("497c");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("bf48");var s=n("828b"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"35777ef9",null,!1,i["a"],void 0);e["default"]=u.exports}}]);