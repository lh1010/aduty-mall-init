(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-checkout-onekeybuy"],{"117c":function(t,e,a){a("f7a5"),a("5ef2"),a("d4b5"),a("5c47"),a("2c10"),t.exports={isEmptyObject:function(t){return"{}"==JSON.stringify(t)},timeToDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=t?new Date(t):new Date,i=a.getFullYear(),s=a.getMonth()+1,c=a.getDate(),o=a.getHours(),n=a.getMinutes(),d=a.getSeconds();s<10&&(s="0"+s),c<10&&(c="0"+c),o<10&&(o="0"+o),n<10&&(n="0"+n),d<10&&(d="0"+d);var r="";return 1==e&&(r=i+"-"+s+"-"+c),2==e&&(r=i+"-"+s+"-"+c+" "+o+":"+n+":"+d),r},urlToObj:function(t){for(var e={},a=t.slice(t.indexOf("?")+1),i=a.split("&"),s=i.length,c=0;c<s;c++){var o=i[c].split("=");e[o[0]]=o[1]}return e},is_wx:function(){return!1},is_pc:function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,i=0;i<e.length;i++)if(t.indexOf(e[i])>0){a=!1;break}return a}}},"151a":function(t,e,a){"use strict";var i=a("4b2b"),s=a.n(i);s.a},"4b2b":function(t,e,a){var i=a("ac8d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("967d").default;s("4cea8f89",i,!0,{sourceMap:!1,shadowMode:!1})},"8a85":function(t,e,a){"use strict";a.r(e);var i=a("a719"),s=a("c721");for(var c in s)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(c);a("151a");var o=a("828b"),n=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"ceacdebc",null,!1,i["a"],void 0);e["default"]=n.exports},a719:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return i}));var i={uPopup:a("9ff3").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("CustomTop",{attrs:{top_title:"确认订单"}}),t.loading?t._e():a("v-uni-view",{staticClass:"checkout"},[a("v-uni-view",{staticClass:"address"},[t.checkoutData.address?a("v-uni-view",{staticClass:"bd",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onPopupShow_setAddress.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"vm1"},[t._v(" "+t._s(t.checkoutData.address.province_name)+" "+t._s(t.checkoutData.address.city_name)+" "+t._s(t.checkoutData.address.district_name)+" "+t._s(t.checkoutData.address.detailed_address)+" ")]),a("v-uni-view",{staticClass:"vm2"},[t._v(" "+t._s(t.checkoutData.address.name)+" "+t._s(t.checkoutData.address.phone)+" ")])],1),a("i",{staticClass:"iconfont icon-youbian more"})],1):t._e(),t.checkoutData.address?t._e():a("v-uni-view",{staticClass:"bd",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage("/pages/address/list")}}},[a("v-uni-view",{staticClass:"info"},[t._v("设置收货地址")]),a("i",{staticClass:"iconfont icon-youbian more"})],1)],1),t.checkoutData.products.length>0?a("v-uni-view",{staticClass:"data_list"},[a("v-uni-view",{staticClass:"items"},t._l(t.checkoutData.products,(function(e,i){return a("v-uni-view",{key:i,staticClass:"item_product"},[a("v-uni-image",{staticClass:"cover",attrs:{src:e.cover,mode:"scaleToFill"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.jumpPage("/pages/product/show?id="+e.id+"&sku="+e.sku)}}}),a("v-uni-view",{staticClass:"info",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.jumpPage("/pages/product/show?id="+e.id+"&sku="+e.sku)}}},[a("v-uni-view",{staticClass:"name"},[a("span",{staticClass:"txt"},[t._v(t._s(e.name))])]),e.specifications.length>0?a("v-uni-view",{staticClass:"types"},t._l(e.specifications,(function(e,i){return a("v-uni-view",{key:i,staticClass:"types_item"},[t._v(" "+t._s(e.specification_name)+"-"+t._s(e.specification_option)+" ")])})),1):t._e(),a("v-uni-view",{staticClass:"pricebox"},[a("span",{staticClass:"price"},[t._v("¥"+t._s(e.price))]),a("span",{staticClass:"number"},[t._v("x"+t._s(e.count))])])],1)],1)})),1)],1):t._e(),a("v-uni-view",{staticClass:"fee"},[a("v-uni-view",{staticClass:"items"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"vm1"},[t._v("商品总额")]),a("v-uni-view",{staticClass:"vm2"},[t._v("¥"+t._s(t.checkoutData.totalData.product_total_price))])],1)],1)],1),a("v-uni-view",{staticClass:"foot_action_blank"}),a("v-uni-view",{staticClass:"foot_action"},[a("v-uni-view",{staticClass:"left"},[t._v(" 合计："),a("span",{staticClass:"price"},[t._v("¥"+t._s(t.checkoutData.totalData.total_price))])]),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createOrder.apply(void 0,arguments)}}},[t._v("提交订单")])],1)],1)],1),a("u-popup",{attrs:{show:t.popupShow_setAddress,mode:"bottom"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.onPopupClose_setAddress.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"popup_setAddress"},[a("v-uni-view",{staticClass:"btop"},[a("span",{staticClass:"stitle"},[t._v("选择地址")]),a("i",{staticClass:"iconfont iconguanbicopy close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onPopupClose_set_address.apply(void 0,arguments)}}})]),a("v-uni-view",{staticClass:"items"},t._l(t.addresses,(function(e,i){return a("v-uni-view",{key:i,staticClass:"item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setAddress(e.id)}}},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"vm1"},[t._v(" "+t._s(e.province_name)+" "+t._s(e.city_name)+" "+t._s(e.district_name)+" "+t._s(e.detailed_address)+" ")]),a("v-uni-view",{staticClass:"vm2"},[t._v(" "+t._s(e.name)+" "+t._s(e.phone)+" ")])],1),t.checkoutData.address.id==e.id?a("i",{staticClass:"iconfont icon-yuanxingxuanzhong"}):t._e()],1)})),1)],1)],1)],1)},c=[]},ac8d:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'.checkout .address[data-v-ceacdebc]{background-color:#fff;padding:%?30?%}.checkout .address .bd[data-v-ceacdebc]{display:flex;align-items:center;justify-content:space-between}.checkout .address .info[data-v-ceacdebc]{width:86%}.checkout .address .info .vm1[data-v-ceacdebc]{font-weight:700}.checkout .data_list[data-v-ceacdebc]{margin-top:%?30?%}.checkout .data_list .items[data-v-ceacdebc]{background-color:#fff;padding:%?30?%;margin-bottom:%?30?%}.checkout .data_list .items_top[data-v-ceacdebc]{margin-bottom:%?30?%;padding-bottom:%?30?%;border-bottom:1px solid #f5f5f5;display:flex}.checkout .data_list .icon_selected[data-v-ceacdebc]{margin-right:8px;font-weight:400;color:#999}.checkout .data_list .icon_selected.on[data-v-ceacdebc]:before{content:"\\e731";color:#ff6131}.checkout .data_list .items .item_product[data-v-ceacdebc]{display:flex;flex-wrap:nowrap;margin-bottom:%?30?%;padding-bottom:%?30?%;border-bottom:1px solid #f5f5f5}.checkout .data_list .items .item_product[data-v-ceacdebc]:last-child{margin-bottom:0;padding-bottom:0;border:none}.checkout .data_list .items .item_product .cover[data-v-ceacdebc]{width:%?158?%;height:%?158?%;border-radius:5px;margin-right:10px;border:1px solid #eee}.checkout .data_list .items .item_product .info[data-v-ceacdebc]{flex:1}.checkout .data_list .items .item_product .info .name[data-v-ceacdebc]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis}.checkout .data_list .items .item_product .types[data-v-ceacdebc]{font-size:12px;color:#999;display:flex}.checkout .data_list .items .item_product .types_item[data-v-ceacdebc]{margin-right:%?10?%}.checkout .data_list .items .item_product .info .price[data-v-ceacdebc]{color:red}.checkout .data_list .items .item_product .info .pricebox .number[data-v-ceacdebc]{float:right;color:#999;font-size:12px;padding-top:5px}.checkout .fee[data-v-ceacdebc]{padding:%?30?%;background-color:#fff;margin-top:%?30?%}.checkout .fee .item[data-v-ceacdebc]{display:flex;justify-content:space-between}.checkout .fee .item .vm2[data-v-ceacdebc]{color:#ff6131}.foot_action_blank[data-v-ceacdebc]{height:%?170?%}.foot_action[data-v-ceacdebc]{position:fixed;left:0;bottom:0;width:100%;opacity:.9;background-color:#fff;border-top:1px solid #eee;height:%?90?%;padding:%?40?% 0}.foot_action .left[data-v-ceacdebc]{width:50%;float:left;display:flex;line-height:%?90?%;padding-left:%?30?%}.foot_action .left .price[data-v-ceacdebc]{color:red}.foot_action .right[data-v-ceacdebc]{float:right;padding-right:%?30?%}.foot_action .right .btn[data-v-ceacdebc]{text-align:center;width:%?300?%;height:%?90?%;line-height:%?90?%;background-color:#ff6131;color:#fff;border:none;border-radius:%?10?%;padding:0}.popup_setAddress .btop[data-v-ceacdebc]{height:49px;line-height:49px;position:relative;text-align:center;padding:0 %?30?%;border-bottom:1px solid #f5f5f5}.popup_setAddress .btop .close[data-v-ceacdebc]{float:right;color:#999}.popup_setAddress .items[data-v-ceacdebc]{overflow:hidden;overflow-y:scroll;height:calc(60vh - 65px)}.popup_setAddress .items .item[data-v-ceacdebc]{background-color:#fff;padding:%?30?%;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #f5f5f5}.popup_setAddress .items .item[data-v-ceacdebc]:last-child{border-bottom:none}.popup_setAddress .items .item .info[data-v-ceacdebc]{width:86%}.popup_setAddress .items .item .info .vm1[data-v-ceacdebc]{font-weight:700}.popup_setAddress .items .item .iconfont[data-v-ceacdebc]{color:red}.page[data-v-ceacdebc]{padding-bottom:%?30?%}',""]),t.exports=e},c721:function(t,e,a){"use strict";a.r(e);var i=a("de0e"),s=a.n(i);for(var c in i)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(c);e["default"]=s.a},de0e:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("0831"),c=(i(a("117c")),i(a("14e1"))),o={components:{CustomTop:c.default},data:function(){return{loading:!0,params:{type:"onekeybuy",count:1,sku:""},checkoutData:[],addresses:[],popupShow_setAddress:!1}},onLoad:function(t){this.params.count=t.count||1,this.params.sku=t.sku||""},onShow:function(){this.getCheckoutData(),this.getAddresses()},methods:{createOrder:function(){uni.showLoading();var t=this.params;s.request.post("/order/createOrder",t).then((function(t){if(uni.hideLoading(),200==t.code)uni.navigateTo({url:"/pages/checkout/pay?order_ids="+t.data.order_ids});else if(400==t.code)return uni.showToast({title:t.message,icon:"none"}),!1}))},getCheckoutData:function(){var t=this;uni.showLoading();var e=this.params;s.request.post("/order/getCheckoutData",e).then((function(e){if(uni.hideLoading(),200==e.code)t.loading=!1,t.checkoutData=e.data;else if(400==e.code)return uni.showModal({content:e.message,showCancel:!1,success:function(t){t.confirm&&uni.navigateBack()}}),!1}))},getAddresses:function(){var t=this,e=this.params;s.request.post("/address/getAddresses",e).then((function(e){t.addresses=e.data}))},onPopupShow_setAddress:function(){this.popupShow_setAddress=!0},onPopupClose_setAddress:function(){this.popupShow_setAddress=!1},setAddress:function(t){this.params.address_id=t,this.onPopupClose_setAddress(),this.getCheckoutData()},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};e.default=o}}]);