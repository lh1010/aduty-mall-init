(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-account-login_password"],{"0831":function(t,n,e){"use strict";var i=e("f5bd").default;e("bf0f");var o=i(e("a55b")),a=o.default.api_url;function s(t,n,e,i){var s={"content-type":"application/x-www-form-urlencoded"},u=void 0!=i.responseType?i.responseType:"txt";t=a+t,e=e||{};e["user_token"]=uni.getStorageSync("user_token"),e["request_client"]=o.default.app_client;var r=new Promise((function(i,o){uni.request({url:t,method:n,data:e,header:s,responseType:u,success:function(t){return 401==t.data.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.data.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t.data)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return r}["options","get","post","put","head","delete","trace","connect"].forEach((function(t){s[t]=function(n,e,i){return s(n,t,e,i||{})}})),t.exports={request:s,upload:function(t,n){var e=a+"/upload";n=n||{},n["user_token"]=uni.getStorageSync("user_token");var i=new Promise((function(i,o){uni.uploadFile({url:e,filePath:t,name:"file",formData:n,success:function(t){t=JSON.parse(t.data);return 401==t.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return i}}},"117c":function(t,n,e){e("f7a5"),e("5ef2"),e("d4b5"),e("5c47"),e("2c10"),t.exports={isEmptyObject:function(t){return"{}"==JSON.stringify(t)},timeToDate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=t?new Date(t):new Date,i=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),s=e.getHours(),u=e.getMinutes(),r=e.getSeconds();o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<10&&(u="0"+u),r<10&&(r="0"+r);var c="";return 1==n&&(c=i+"-"+o+"-"+a),2==n&&(c=i+"-"+o+"-"+a+" "+s+":"+u+":"+r),c},urlToObj:function(t){for(var n={},e=t.slice(t.indexOf("?")+1),i=e.split("&"),o=i.length,a=0;a<o;a++){var s=i[a].split("=");n[s[0]]=s[1]}return n},is_wx:function(){return!1},is_pc:function(){for(var t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],e=!0,i=0;i<n.length;i++)if(t.indexOf(n[i])>0){e=!1;break}return e}}},"14e1":function(t,n,e){"use strict";e.r(n);var i=e("4132"),o=e("6789");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);var s=e("828b"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1df43acd",null,!1,i["a"],void 0);n["default"]=u.exports},4132:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("v-uni-view",{staticClass:"customtop"},[e("v-uni-view",{staticClass:"item left"},[e("i",{staticClass:"back iconfont icon-xiangzuo2",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goBack.apply(void 0,arguments)}}}),e("i",{staticClass:"home iconfont icon-shouye",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goHome.apply(void 0,arguments)}}})]),e("v-uni-view",{staticClass:"item title"},[t._v(t._s(t.top_title))]),e("v-uni-view",{staticClass:"item right",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage(t.right_url)}}},[t._v(t._s(t.right_txt))])],1),e("v-uni-view",{staticClass:"customtop_blank"})],1)},o=[]},"4c69":function(t,n,e){var i=e("c86c");n=i(!1),n.push([t.i,".login[data-v-1134d192]{padding:%?40?% 0 %?30?% 0}.login .item[data-v-1134d192]{margin-bottom:%?30?%}.login .other_way[data-v-1134d192]{display:block;overflow:hidden;width:100%;margin-top:%?30?%}.login .other_way .ow_item[data-v-1134d192]{display:inline-block;font-size:%?24?%;color:#999}.login .other_way .ow_item1[data-v-1134d192]{float:left}.login .other_way .ow_item2[data-v-1134d192]{float:right}.wxapplogin .box[data-v-1134d192]{text-align:center;position:relative}.wxapplogin .img[data-v-1134d192]{width:35px;height:35px}.wxapplogin .txt[data-v-1134d192]{font-size:12px;color:#999}.wxapplogin .box .btn[data-v-1134d192]{position:absolute;width:100%;height:100%;top:0;opacity:0}.remind[data-v-1134d192]{margin:0 auto;display:flex;font-size:12px}.remind .txt[data-v-1134d192]{margin-left:3px;padding-top:3px;color:#999}.remind .link[data-v-1134d192]{color:#f4645f}uni-page-body[data-v-1134d192]{background-color:#fff}body.?%PAGE?%[data-v-1134d192]{background-color:#fff}",""]),t.exports=n},6426:function(t,n,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("0831"),a=i(e("14e1")),s=i(e("117c")),u={components:{CustomTop:a.default},data:function(){return{read_agreement_status:!1,code2seesion:""}},onLoad:function(t){s.default.is_wx()&&void 0!=t.wxmp_openid&&(this.wxmp_openid=t.wxmp_openid)},onShow:function(){if(s.default.is_wx()){if(void 0!=this.wxmp_openid)return uni.setStorageSync("wxmp_openid",this.wxmp_openid),!1;var t=uni.getStorageSync("wxmp_openid");if(""!=t)return!1;var n=getCurrentPages(),e=(n[n.length-1].route,n[n.length-1]["$page"]["fullPath"]);o.request.post("/common/getConfig").then((function(t){window.location.href=t.data.app_url+"/api/account/wxmp_login?url_ident="+e}))}},methods:{formSubmit:function(t){if(!this.read_agreement_status)return uni.showToast({icon:"none",title:"请先阅读并同意协议"}),!1;uni.showLoading();var n=t.detail.value;n.code2seesion=this.code2seesion,s.default.is_wx()&&(n.type="wxmp",n.wxmp_openid=uni.getStorageSync("wxmp_openid")),o.request.post("/account/login_password",n).then((function(t){uni.hideLoading(),200==t.code?(uni.setStorageSync("user_token",t.data.user_token),uni.showToast({title:"登录成功",duration:1500,success:function(){setTimeout((function(){uni.switchTab({url:"/pages/account/index"})}),1500)}})):400==t.code&&uni.showToast({title:t.message,icon:"none"})}))},setReadAgreement:function(t){var n=!this.read_agreement_status;this.read_agreement_status=n},wxapp_login1:function(){var t=this;uni.login({success:function(n){n.code?(uni.showLoading(),o.request.post("/account/wxapp_login1",{code:n.code}).then((function(n){if(uni.hideLoading(),400==n.code)return uni.showToast({title:n.message,icon:"none"}),!1;t.code2seesion=n.data.code2seesion}))):(console.log(n),uni.showToast({title:"登录失败",icon:"none"}))}})},showAgreementErrorMsg:function(){return uni.showToast({icon:"none",title:"请先阅读并同意协议"}),!1},decryptPhoneNumber:function(t){if("getPhoneNumber:fail user deny"==t.detail.errMsg)return uni.showToast({title:"取消授权",icon:"none"}),!1;var n=uni.getStorageSync("inviteUserId"),e={};e.inviteUserId=n,e.iv=t.detail.iv,e.encryptedData=t.detail.encryptedData,e.code2seesion=this.code2seesion,uni.showLoading({title:"登录中"}),o.request.post("/account/wxapp_login2",e).then((function(t){if(uni.hideLoading(),400==t.code)return uni.showToast({title:t.message,icon:"none"}),!1;uni.setStorageSync("user_token",t.data.user_token),uni.switchTab({url:"/pages/account/index"});var n=getCurrentPages(),e=n[n.length-2];void 0!=e.loginSuccess&&e.loginSuccess()}))},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=u},6789:function(t,n,e){"use strict";e.r(n);var i=e("baac"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},"70d9":function(t,n,e){"use strict";e.r(n);var i=e("f9f4"),o=e("ebc0");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("8831");var s=e("828b"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1134d192",null,!1,i["a"],void 0);n["default"]=u.exports},8831:function(t,n,e){"use strict";var i=e("ddc3"),o=e.n(i);o.a},a55b:function(t,n){t.exports={app_client:"h5",api_url:"/api",app_version:"1.0.1",app_env:"dev"}},baac:function(t,n,e){"use strict";e("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={name:"CustomTop",data:function(){return{}},props:{top_title:{type:String},right_txt:{type:String},right_url:{type:String}},methods:{goBack:function(){uni.navigateBack()},goHome:function(){uni.switchTab({url:"/pages/index/index"})},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=i},ddc3:function(t,n,e){var i=e("4c69");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("967d").default;o("36a730c6",i,!0,{sourceMap:!1,shadowMode:!1})},ebc0:function(t,n,e){"use strict";e.r(n);var i=e("6426"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},f9f4:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("CustomTop",{attrs:{top_title:"密码登录"}}),e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"login"},[e("v-uni-form",{staticClass:"aduty-fm",on:{submit:function(n){arguments[0]=n=t.$handleEvent(n),t.formSubmit.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"aduty-fm-item"},[e("v-uni-view",{staticClass:"aduty-fm-inputbox"},[e("v-uni-input",{staticClass:"aduty-form-input",attrs:{name:"phone",type:"text",placeholder:"手机号"}})],1)],1),e("v-uni-view",{staticClass:"aduty-fm-item"},[e("v-uni-view",{staticClass:"aduty-fm-inputbox"},[e("v-uni-input",{staticClass:"aduty-form-input",attrs:{name:"password",type:"password",placeholder:"密码"}})],1)],1),e("v-uni-view",{staticClass:"remind"},[e("v-uni-radio",{attrs:{color:"#f4645f",checked:t.read_agreement_status},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setReadAgreement.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"txt"},[t._v("阅读并同意"),e("span",{staticClass:"link",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage("/pages/article/show?type=user_agreement")}}},[t._v("《用户协议》")])])],1),e("v-uni-button",{staticClass:"aduty-btn aduty-btn-default",style:{marginTop:"15px"},attrs:{formType:"submit"}},[t._v("立即登录")])],1),e("v-uni-view",{staticClass:"other_way"},[e("v-uni-view",{staticClass:"ow_item ow_item1",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage("/pages/account/login")}}},[t._v("手机验证码登录")]),e("v-uni-view",{staticClass:"ow_item ow_item2",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage("/pages/account/register")}}},[t._v("立即注册")])],1),t.read_agreement_status?t._e():e("v-uni-view",{staticClass:"wxapplogin none",style:{marginTop:"50px"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.showAgreementErrorMsg.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-image",{staticClass:"img",attrs:{src:"/static/images/phone.png"}}),e("v-uni-view",{staticClass:"txt"},[t._v("手机号快捷登录")]),e("v-uni-button",{staticClass:"btn"},[t._v("获取手机号码")])],1)],1),t.read_agreement_status?e("v-uni-view",{staticClass:"wxapplogin none",style:{marginTop:"50px"}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-image",{staticClass:"img",attrs:{src:"/static/images/phone.png"}}),e("v-uni-view",{staticClass:"txt"},[t._v("手机号快捷登录")]),e("v-uni-button",{staticClass:"btn",attrs:{"open-type":"getPhoneNumber"},on:{getphonenumber:function(n){arguments[0]=n=t.$handleEvent(n),t.decryptPhoneNumber.apply(void 0,arguments)}}},[t._v("获取手机号码")])],1)],1):t._e()],1)],1)],1)},o=[]}}]);