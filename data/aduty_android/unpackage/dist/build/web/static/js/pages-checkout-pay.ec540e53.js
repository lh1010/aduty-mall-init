(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-checkout-pay"],{"0018":function(t,n,a){t.exports=a.p+"static/images/icon_weixinpay.png"},"0831":function(t,n,a){"use strict";var i=a("f5bd").default;a("bf0f");var e=i(a("a55b")),o=e.default.api_url;function s(t,n,a,i){var s={"content-type":"application/x-www-form-urlencoded"},c=void 0!=i.responseType?i.responseType:"txt";t=o+t,a=a||{};a["user_token"]=uni.getStorageSync("user_token"),a["request_client"]=e.default.app_client;var u=new Promise((function(i,e){uni.request({url:t,method:n,data:a,header:s,responseType:c,success:function(t){return 401==t.data.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.data.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t.data)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return u}["options","get","post","put","head","delete","trace","connect"].forEach((function(t){s[t]=function(n,a,i){return s(n,t,a,i||{})}})),t.exports={request:s,upload:function(t,n){var a=o+"/upload";n=n||{},n["user_token"]=uni.getStorageSync("user_token");var i=new Promise((function(i,e){uni.uploadFile({url:a,filePath:t,name:"file",formData:n,success:function(t){t=JSON.parse(t.data);return 401==t.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return i}}},"117c":function(t,n,a){a("f7a5"),a("5ef2"),a("d4b5"),a("5c47"),a("2c10"),t.exports={isEmptyObject:function(t){return"{}"==JSON.stringify(t)},timeToDate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=t?new Date(t):new Date,i=a.getFullYear(),e=a.getMonth()+1,o=a.getDate(),s=a.getHours(),c=a.getMinutes(),u=a.getSeconds();e<10&&(e="0"+e),o<10&&(o="0"+o),s<10&&(s="0"+s),c<10&&(c="0"+c),u<10&&(u="0"+u);var r="";return 1==n&&(r=i+"-"+e+"-"+o),2==n&&(r=i+"-"+e+"-"+o+" "+s+":"+c+":"+u),r},urlToObj:function(t){for(var n={},a=t.slice(t.indexOf("?")+1),i=a.split("&"),e=i.length,o=0;o<e;o++){var s=i[o].split("=");n[s[0]]=s[1]}return n},is_wx:function(){return!1},is_pc:function(){for(var t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,i=0;i<n.length;i++)if(t.indexOf(n[i])>0){a=!1;break}return a}}},"14e1":function(t,n,a){"use strict";a.r(n);var i=a("4132"),e=a("6789");for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return e[t]}))}(o);var s=a("828b"),c=Object(s["a"])(e["default"],i["b"],i["c"],!1,null,"1df43acd",null,!1,i["a"],void 0);n["default"]=c.exports},"36a5":function(t,n,a){t.exports=a.p+"static/images/icon_alipay.png"},4132:function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return e})),a.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("v-uni-view",[a("v-uni-view",{staticClass:"customtop"},[a("v-uni-view",{staticClass:"item left"},[a("i",{staticClass:"back iconfont icon-xiangzuo2",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goBack.apply(void 0,arguments)}}}),a("i",{staticClass:"home iconfont icon-shouye",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goHome.apply(void 0,arguments)}}})]),a("v-uni-view",{staticClass:"item title"},[t._v(t._s(t.top_title))]),a("v-uni-view",{staticClass:"item right",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage(t.right_url)}}},[t._v(t._s(t.right_txt))])],1),a("v-uni-view",{staticClass:"customtop_blank"})],1)},e=[]},"4d6f":function(t,n,a){var i=a("7248");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var e=a("967d").default;e("091ceafd",i,!0,{sourceMap:!1,shadowMode:!1})},6789:function(t,n,a){"use strict";a.r(n);var i=a("baac"),e=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return i[t]}))}(o);n["default"]=e.a},7248:function(t,n,a){var i=a("c86c");n=i(!1),n.push([t.i,".pricebox[data-v-11613d8f]{text-align:center;padding:%?30?%}.pricebox .price[data-v-11613d8f]{color:red;font-weight:600;font-size:20px}.pay_orders[data-v-11613d8f]{background-color:#fff;padding:%?30?%;margin-bottom:%?30?%}.pay_orders .stitle[data-v-11613d8f]{font-weight:600;margin-bottom:%?30?%}.pay_orders .item .spa[data-v-11613d8f]{margin-left:5px;color:#0d6efd}.payment[data-v-11613d8f]{background-color:#fff;padding:0 %?30?%}.payment .stitle[data-v-11613d8f]{padding:%?30?% 0 %?30?% 0;border-bottom:1px solid #f5f5f5;font-weight:600}.foot_action_blank[data-v-11613d8f]{height:%?170?%}.foot_action[data-v-11613d8f]{position:fixed;left:0;bottom:0;width:100%;opacity:.9;background-color:#fff;border-top:1px solid #eee;height:%?90?%;padding:%?40?% 0}.foot_action .btn[data-v-11613d8f]{text-align:center;width:95%;height:%?90?%;line-height:%?90?%;background-color:red;color:#fff;border:none;border-radius:%?10?%;padding:0;margin:0 auto}.result[data-v-11613d8f]{text-align:center;padding:%?60?%}.result .txt .iconfont[data-v-11613d8f]{margin-right:%?8?%}.result .des[data-v-11613d8f]{margin-top:%?20?%;color:#999;font-size:%?24?%}.result .btns[data-v-11613d8f]{margin-top:%?30?%}.result .btns .btn[data-v-11613d8f]{margin-left:%?10?%}.result .btns .btn[data-v-11613d8f]:first-child{margin-left:0}.page[data-v-11613d8f]{padding-bottom:%?30?%}",""]),t.exports=n},"7dfd":function(t,n,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,a("d4b5");var e=a("0831"),o=i(a("117c")),s=i(a("14e1")),c=i(a("a55b")),u={components:{CustomTop:s.default},data:function(){return{loading:!0,order_ids:"",orders:{},totalData:{},payment_way:"weixinpay",payment_status:""}},onLoad:function(t){this.order_ids=t.order_ids},onShow:function(){this.getOrderPayData()},methods:{payFun:function(){if("dev"==c.default.app_env)return uni.showModal({content:"演示版不支持支付，正式版恢复此功能，可咨询正式版本。",showCancel:!1}),!1;var t=this;uni.showModal({content:"确认支付？",success:function(n){if(n.confirm){uni.showLoading();var a={order_ids:t.order_ids},i=t.payment_way;"weixinpay"==i&&(i=o.default.is_wx()?"weixinpay_jsapi_wxmp":"weixinpay_h5"),a.payment_way=i,e.request.post("/payment/pay_order",a).then((function(n){if(uni.hideLoading(),400==n.code)return uni.showToast({title:n.message,icon:"none"}),!1;"alipay_wap"==i&&(document.querySelector("body").innerHTML=n.data,document.forms[0].submit()),"alipay_wap"==i&&uni.navigateTo({url:"/pages/index/out?url="+n.data.url}),"weixinpay_h5"==i&&(window.location.href=n.data.url),"weixinpay_jsapi_wxmp"==i&&t.onBridgeReady(n.data.jsApiParams),"weixinpay_jsapi_wxapp"==i&&t.onBridgeReady(n.data.jsApiParams),"wallet"==i&&uni.showToast({title:"支付成功",icon:"success",duration:1500,success:function(){t.payment_status="success"}})}))}}})},onBridgeReady:function(t){uni.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(t){uni.showToast({title:"充值成功",icon:"success",duration:1500,success:function(){setTimeout((function(){this.payment_status="success"}),1500)}})},fail:function(t){"requestPayment:fail cancel"==t.errMsg?uni.showToast({title:"取消支付",icon:"none"}):uni.showToast({title:"支付失败",icon:"error"}),console.log("fail:"+JSON.stringify(t))}})},getOrderPayData:function(){var t=this;uni.showLoading(),e.request.post("/order/getOrderPayData",{order_ids:this.order_ids}).then((function(n){t.loading=!1,uni.hideLoading(),t.orders=n.data.orders,t.totalData=n.data.totalData}))},setPaymentWay:function(t){this.payment_way=t},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=u},a20a:function(t,n,a){"use strict";var i=a("4d6f"),e=a.n(i);e.a},a55b:function(t,n){t.exports={app_client:"h5",api_url:"/api",app_version:"1.0.1",app_env:"dev"}},baac:function(t,n,a){"use strict";a("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={name:"CustomTop",data:function(){return{}},props:{top_title:{type:String},right_txt:{type:String},right_url:{type:String}},methods:{goBack:function(){uni.navigateBack()},goHome:function(){uni.switchTab({url:"/pages/index/index"})},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};n.default=i},c3c2:function(t,n,a){t.exports=a.p+"static/images/icon_wallet.png"},d02b:function(t,n,a){"use strict";a.r(n);var i=a("f20a"),e=a("ded1");for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return e[t]}))}(o);a("a20a");var s=a("828b"),c=Object(s["a"])(e["default"],i["b"],i["c"],!1,null,"11613d8f",null,!1,i["a"],void 0);n["default"]=c.exports},ded1:function(t,n,a){"use strict";a.r(n);var i=a("7dfd"),e=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return i[t]}))}(o);n["default"]=e.a},f20a:function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return e})),a.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"page"},[i("CustomTop",{attrs:{top_title:"收银台"}}),t.loading||""!=t.payment_status?t._e():i("v-uni-view",{staticClass:"paypage"},[i("v-uni-view",{staticClass:"pricebox"},[i("span",{staticClass:"price"},[t._v("¥"+t._s(t.totalData.total_price))])]),i("v-uni-view",{staticClass:"pay_orders"},[i("v-uni-view",{staticClass:"stitle"},[t._v("订单信息")]),i("v-uni-view",{staticClass:"items"},t._l(t.orders,(function(n,a){return i("v-uni-view",{key:a,staticClass:"item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.jumpPage("/pages/order/show?id="+n.id)}}},[i("span",{staticClass:"sp1"},[t._v("订单号："+t._s(n.number))]),i("span",{staticClass:"spa"},[t._v("查看详情")])])})),1)],1),i("v-uni-view",{staticClass:"payment"},[i("v-uni-view",{staticClass:"stitle"},[t._v("支付方式")]),i("v-uni-view",{staticClass:"items"},[i("v-uni-view",{staticClass:"item",class:"weixinpay"==t.payment_way?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setPaymentWay("weixinpay")}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"icon",attrs:{src:a("0018")}}),i("span",{staticClass:"txt"},[t._v("微信支付")])],1),i("i",{staticClass:"iconfont icon-yuanxingweixuanzhong"})],1),i("v-uni-view",{staticClass:"item",class:"alipay_wap"==t.payment_way?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setPaymentWay("alipay_wap")}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"icon",attrs:{src:a("36a5")}}),i("span",{staticClass:"txt"},[t._v("支付宝支付")])],1),i("i",{staticClass:"iconfont icon-yuanxingweixuanzhong"})],1),i("v-uni-view",{staticClass:"item",class:"wallet"==t.payment_way?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.setPaymentWay("wallet")}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"icon",attrs:{src:a("c3c2")}}),i("span",{staticClass:"txt"},[t._v("余额支付")])],1),i("i",{staticClass:"iconfont icon-yuanxingweixuanzhong"})],1)],1)],1),i("v-uni-view",{staticClass:"foot_action"},[i("v-uni-view",{staticClass:"btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.payFun.apply(void 0,arguments)}}},[t._v("立即支付")])],1)],1),"success"==t.payment_status?i("v-uni-view",{staticClass:"result"},[i("v-uni-view",{staticClass:"txt"},[i("i",{staticClass:"iconfont icon-yuanxingxuanzhong"}),t._v("支付成功")]),i("v-uni-view",{staticClass:"btns"},[i("v-uni-button",{staticClass:"aduty-btn aduty-btn-default",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpPage("/pages/order/list")}}},[t._v("查看订单")])],1)],1):t._e()],1)},e=[]}}]);