(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cart-index"],{"0831":function(t,e,a){"use strict";var i=a("f5bd").default;a("bf0f");var n=i(a("a55b")),o=n.default.api_url;function s(t,e,a,i){var s={"content-type":"application/x-www-form-urlencoded"},c=void 0!=i.responseType?i.responseType:"txt";t=o+t,a=a||{};a["user_token"]=uni.getStorageSync("user_token"),a["request_client"]=n.default.app_client;var d=new Promise((function(i,n){uni.request({url:t,method:e,data:a,header:s,responseType:c,success:function(t){return 401==t.data.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.data.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t.data)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return d}["options","get","post","put","head","delete","trace","connect"].forEach((function(t){s[t]=function(e,a,i){return s(e,t,a,i||{})}})),t.exports={request:s,upload:function(t,e){var a=o+"/upload";e=e||{},e["user_token"]=uni.getStorageSync("user_token");var i=new Promise((function(i,n){uni.uploadFile({url:a,filePath:t,name:"file",formData:e,success:function(t){t=JSON.parse(t.data);return 401==t.code?(uni.showToast({title:"登录已失效，请重新登录",icon:"none"}),!1):500==t.code?(uni.showToast({title:"服务异常",icon:"none"}),!1):void i(t)},fail:function(t){return uni.showToast({title:"网络错误",icon:"none"}),!1}})}));return i}}},1661:function(t,e,a){"use strict";var i=a("3d9e"),n=a.n(i);n.a},"39aa":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("2797"),a("aa9c");var i=a("0831"),n={data:function(){return{loading:!0,logined:!1,data_loading:!0,products:[],totalData:{},manage_ident:0}},onLoad:function(t){var e=this;uni.showLoading(),i.request.post("/common/getConfig").then((function(t){e.config=t.data}))},onShow:function(){this.getLoginUser()},onPullDownRefresh:function(){this.getCartData()},methods:{getLoginUser:function(){var t=this;i.request.post("/account/getLoginUser").then((function(e){t.loading=!1,e.data.id?(t.logined=!0,t.getCartData()):(uni.hideLoading(),t.logined=!1)}))},getCartData:function(){var t=this;i.request.post("/order/getCartData").then((function(e){uni.stopPullDownRefresh(),uni.hideLoading(),t.data_loading=!1,t.products=e.data.products,t.totalData=e.data.totalData}))},setSelected_product:function(t){var e=this;this.products.forEach((function(a,i){if(e.products[i].sku==t){var n=e.products[i].selected;e.products[i].selected=1==n?0:1}})),this.checkSelected(),this.setSelected_store()},setSelected_all:function(){var t=this,e=this.totalData.all_selected;1==e?(this.totalData.all_selected=0,this.products.forEach((function(e,a){t.products[a].selected=0}))):(this.totalData.all_selected=1,this.products.forEach((function(e,a){t.products[a].selected=1}))),this.checkSelected(),this.setSelected_store()},checkSelected:function(){var t=1;this.products.forEach((function(e,a){1!=e.selected&&(t=0)})),this.totalData.all_selected=t},setSelected_store:function(){var t=this,e=[];this.products.forEach((function(t,a){1==t.selected&&e.push(t.sku)})),uni.showLoading(),i.request.post("/product/selectCart",{skus:e}).then((function(e){uni.hideLoading(),t.getCartData()}))},deleteCart:function(){var t=[];this.products.forEach((function(e,a){1==e.selected&&t.push(e.sku)}));var e=this;uni.showModal({content:"确认删除选中的商品？",success:function(a){a.confirm&&(uni.showLoading(),i.request.post("/product/deleteCart",{skus:t}).then((function(t){uni.hideLoading(),e.getCartData()})))}})},setManage:function(){this.manage_ident=1==this.manage_ident?0:1},switchTab:function(t){uni.switchTab({url:t})},jumpPage:function(t){uni.navigateTo({url:t})}}};e.default=n},"3d9e":function(t,e,a){var i=a("4805");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("62fafef6",i,!0,{sourceMap:!1,shadowMode:!1})},4805:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'.empty_data[data-v-7d63fcde]{margin-top:50px;text-align:center}.empty_data .cart_img[data-v-7d63fcde]{width:70px;height:70px;margin:0 auto;display:block;opacity:.5}.empty_data .msg[data-v-7d63fcde]{font-size:12px;color:#999;margin-top:10px}.empty_data .btn[data-v-7d63fcde]{border:1px solid #333;padding:3px 30px;border-radius:20px;display:inline-block;margin-top:20px;font-size:14px}.cart .data_list .items[data-v-7d63fcde]{background-color:#fff;padding:%?30?%;margin-bottom:%?30?%}.cart .data_list .items_top[data-v-7d63fcde]{margin-bottom:%?30?%;padding-bottom:%?30?%;border-bottom:1px solid #f5f5f5;display:flex}.cart .data_list .icon_selected[data-v-7d63fcde]{margin-right:8px;font-weight:400;color:#999}.cart .data_list .icon_selected.on[data-v-7d63fcde]:before{content:"\\e731";color:#ff6131}.cart .data_list .items .item_product[data-v-7d63fcde]{display:flex;flex-wrap:nowrap;margin-bottom:%?30?%;padding-bottom:%?30?%;border-bottom:1px solid #f5f5f5}.cart .data_list .items .item_product[data-v-7d63fcde]:last-child{margin-bottom:0;padding-bottom:0;border:none}.cart .data_list .items .item_product .cover[data-v-7d63fcde]{width:%?158?%;height:%?158?%;border-radius:5px;margin-right:10px;border:1px solid #eee}.cart .data_list .items .item_product .info[data-v-7d63fcde]{flex:1}.cart .data_list .items .item_product .info .name[data-v-7d63fcde]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis}.cart .data_list .items .item_product .info .types[data-v-7d63fcde]{font-size:12px;color:#999;display:flex}.cart .data_list .items .item_product .info .types_item[data-v-7d63fcde]{margin-right:%?10?%}.cart .data_list .items .item_product .info .price[data-v-7d63fcde]{color:red}.cart .data_list .items .item_product .info .pricebox .number[data-v-7d63fcde]{float:right;color:#999;font-size:12px;padding-top:5px}.cart .foot_action[data-v-7d63fcde]{background-color:#fff;padding:%?34?% %?30?%;overflow:hidden}.cart .foot_action .left[data-v-7d63fcde]{float:left;display:flex}.cart .foot_action .pricebox[data-v-7d63fcde]{margin-right:10px}.cart .foot_action .em[data-v-7d63fcde]{font-size:12px}.cart .foot_action .price[data-v-7d63fcde]{color:red}.cart .foot_action .right[data-v-7d63fcde]{float:right;display:flex}.cart .foot_action .right .btn[data-v-7d63fcde]{text-align:center;padding:3px 12px;background-color:#ff6131;color:#fff;border:none;border-radius:4px;font-size:14px}.cart .foot_action .right .btn-delete[data-v-7d63fcde]{background-color:#6c757d}uni-page-body[data-v-7d63fcde]{padding-bottom:%?30?%}',""]),t.exports=e},"56b2":function(t,e,a){"use strict";a.r(e);var i=a("f562"),n=a("e78b2");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("1661");var s=a("828b"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"7d63fcde",null,!1,i["a"],void 0);e["default"]=c.exports},a55b:function(t,e){t.exports={app_client:"h5",api_url:"/api",app_version:"1.0.1",app_env:"dev"}},e78b2:function(t,e,a){"use strict";a.r(e);var i=a("39aa"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},f562:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"account_index"},[a("v-uni-view",{staticClass:"customtop"},[a("v-uni-view",{staticClass:"item left"}),a("v-uni-view",{staticClass:"item title"},[t._v("购物车")]),a("v-uni-view",{staticClass:"item right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setManage.apply(void 0,arguments)}}},[t.logined&&0==t.manage_ident?a("span",[t._v("编辑")]):t._e(),t.logined&&1==t.manage_ident?a("span",[t._v("完成")]):t._e()])],1),a("v-uni-view",{staticClass:"customtop_blank"}),t.loading?t._e():a("v-uni-view",{staticClass:"cart"},[t.logined?t._e():a("v-uni-view",{staticClass:"empty_data"},[a("v-uni-image",{staticClass:"cart_img",attrs:{src:"/static/images/foot_icon_cart.png",mode:"scaleToFill"}}),a("v-uni-view",{staticClass:"msg"},[t._v("登录后可同步购物车的产品～")]),a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage("/pages/account/login_password")}}},[t._v("请先登录")])],1),t.logined&&!t.data_loading?a("v-uni-view",[0==t.products.length?a("v-uni-view",{staticClass:"empty_data"},[a("v-uni-image",{staticClass:"cart_img",attrs:{src:"/static/images/foot_icon_cart.png",mode:"scaleToFill"}}),a("v-uni-view",{staticClass:"msg"},[t._v("购物车空空如也～")]),a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab("/pages/index/index")}}},[t._v("去逛逛")])],1):t._e(),t.products.length>0?a("v-uni-view",{staticClass:"data_list"},[a("v-uni-view",{staticClass:"items"},t._l(t.products,(function(e,i){return a("v-uni-view",{key:i,staticClass:"item_product"},[a("i",{staticClass:"iconfont icon-yuanxingweixuanzhong icon_selected",class:1==e.selected?"on":"",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setSelected_product(e.sku)}}}),a("v-uni-image",{staticClass:"cover",attrs:{src:e.cover,mode:"scaleToFill"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.jumpPage("/pages/product/show?id="+e.id+"&sku="+e.sku)}}}),a("v-uni-view",{staticClass:"info",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.jumpPage("/pages/product/show?id="+e.id+"&sku="+e.sku)}}},[a("v-uni-view",{staticClass:"name"},[a("span",{staticClass:"txt"},[t._v(t._s(e.name))])]),e.specifications.length>0?a("v-uni-view",{staticClass:"types"},t._l(e.specifications,(function(e,i){return a("v-uni-view",{key:i,staticClass:"types_item"},[t._v(" "+t._s(e.specification_name)+"-"+t._s(e.specification_option)+" ")])})),1):t._e(),a("v-uni-view",{staticClass:"pricebox"},[a("span",{staticClass:"price"},[t._v("¥"+t._s(e.price))]),a("span",{staticClass:"number"},[t._v("x"+t._s(e.count))])])],1)],1)})),1),0==t.manage_ident?a("v-uni-view",{staticClass:"foot_action"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-view",{staticClass:"selectbox"},[a("i",{staticClass:"iconfont icon-yuanxingweixuanzhong icon_selected",class:1==t.totalData.all_selected?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSelected_all.apply(void 0,arguments)}}}),t._v(" 全选 ")])],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"pricebox"},[a("span",{staticClass:"em"},[t._v("合计：")]),a("span",{staticClass:"price"},[t._v("¥"+t._s(t.totalData.total_price))])]),a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumpPage("/pages/checkout/cart")}}},[t._v("去结算")])],1)],1):t._e(),1==t.manage_ident?a("v-uni-view",{staticClass:"foot_action"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-view",{staticClass:"selectbox"},[a("i",{staticClass:"iconfont icon-yuanxingweixuanzhong icon_selected",class:1==t.totalData.all_selected?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSelected_all.apply(void 0,arguments)}}}),t._v(" 全选 ")])],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"btn btn-delete",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteCart.apply(void 0,arguments)}}},[t._v("删除选中")])],1)],1):t._e()],1):t._e()],1):t._e()],1)],1)},n=[]}}]);